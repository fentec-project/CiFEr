sudo: required
dist: xenial
language: c

branches:
  only:
  -include_amcl

# test with both compilers
compiler:
  - clang
  - gcc

  # remove older version of CMake, install latest version with pip
install:
  - sudo apt update
  - sudo apt install -y build-essential libgmp-dev libsodium-dev
  - sudo rm -rf /usr/local/cmake*
  - sudo -H pip install cmake
  - cd external/amcl
  - ./setup_amcl.sh
  - cd ../..

script:
  - cmake .
  - make
  - make test
